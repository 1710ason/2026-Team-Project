# Project: Magnetic Core Characterization (50Hz - 400Hz)

**Client:** Carroll & Meynell Transformers Ltd.
**Role:** Senior Research Engineer (Magnetics & DSP) / Data Analysis Agent
**Date:** Epiphany Term 2026

## 1. Project Overview
This project aims to characterize the magnetic properties of **HWR90/32 C-Cores** (Grain Oriented Silicon Steel) at frequencies ranging from **50Hz to 400Hz**. The goal is to provide empirical data (B-H loops, specific core loss) to support the design of high-frequency transformers for renewable energy and marine applications.

The core challenge is to develop a robust **Python-based data analysis pipeline** that converts raw oscilloscope waveforms (Voltage/Current) into physical magnetic parameters (B-field, H-field, Power Loss), addressing specific challenges like numerical integration drift.

## 2. Hardware Specifications & Constants
**CRITICAL:** These values must be used in all analysis scripts.

*   **Core Type:** HWR90/32 "C" Core Pair
*   **Material:** 0.3mm & 0.1mm GOSS (Grain Oriented Silicon Steel), potentially Amorphous.
*   **Primary Turns (N1):** 200
*   **Secondary Turns (N2):** 200
*   **Effective Area (Ae):** $4.86 \times 10^{-4} \text{ m}^2$ (includes stacking factor)
*   **Mean Path Length (Lm):** $0.20 \text{ m}$
*   **Shunt Resistor ($R_{sense}$):** $1.0 \, \Omega$ (Non-inductive)
*   **Material Density:** $7650 \text{ kg/m}^3$ (for Si-Fe)

## 3. Data Analysis Pipeline (Software Requirements)

The system must process CSV files generated by a 4-channel DSO.

### Input Data Structure
*   **Format:** CSV
*   **Columns:**
    1.  `Time` (seconds)
    2.  `Ch1_Voltage` (Voltage across $R_{sense}$ -> Excitation Current)
    3.  `Ch2_Voltage` (Voltage across Secondary -> Induced EMF)

### Key Algorithms & Logic
1.  **H-Field Calculation (Ampere's Law):**
    $$ H(t) = \frac{N_1 \cdot I(t)}{L_m} = \frac{N_1 \cdot (V_{Ch1} / R_{sense})}{L_m} $$

2.  **B-Field Calculation (Faraday's Law):**
    $$ B(t) = -\frac{1}{N_2 \cdot A_e} \int V_{Ch2}(t) \, dt $$
    *   **Constraint:** Must implement **Drift Correction** (Linear Detrending) after integration to ensure the B-waveform is periodic and centered (removes integration drift and DC offsets).

3.  **Specific Core Loss ($W_{loss}$):**
    *   Calculate energy per cycle ($J/m^3$) using the area of the B-H loop: $\oint H \, dB$
    *   Convert to Power (Watts) and normalize by mass ($W/kg$).

4.  **Loss Separation (Two-Frequency Method):**
    *   Fit data to the Steinmetz/Bertotti equation to separate Hysteresis vs. Eddy Current losses:
    $$ \frac{P_{total}}{f} = K_h B^n + K_e B^2 f $$

## 4. Development Roadmap

*   **Week 1:** Setup & Calibration (Hardware focus).
*   **Week 2-3:** Data Collection (0.3mm & 0.1mm GOSS, 50-400Hz).
*   **Week 4:** **Software Development** (Python processing scripts, batch processing).
*   **Week 5:** Analysis & Interpretation (Loss separation, skin effect analysis).
*   **Week 6:** Final Report Generation (B-H Atlas, Design Recommendations).

## 5. Directory Structure
*   `Docs/`: Contains project briefs, analysis tasks, and detailed plans.
    *   `transformer_analysis_task.pdf`: Specific DSP logic and pseudo-code requirements.
    *   `Plan.pdf`: Comprehensive project schedule and theoretical framework.
    *   `Carroll and Meynell project brief...`: Original client requirements.
*   *(Future)* `src/`: Python source code.
*   *(Future)* `data/`: Raw CSV data from experiments.
*   *(Future)* `output/`: Generated plots and reports.

## 6. Commands & Conventions
*   **Language:** Python 3.x
*   **Key Libraries:** `numpy`, `scipy` (specifically `scipy.integrate.cumtrapz`, `scipy.signal.detrend`), `matplotlib`, `pandas`.
*   **Code Style:** Modular, functional, Pythonic. Use `snake_case` for variables/functions.
